!function(a,b){a.widget("ui.rlightbox",{options:{animationSpeed:"fast",setPrefix:"lb",showMap:!0,counterDelimiter:" / ",videoWidth:640,videoHeight:385,errorMessage:"Oh dear! Something went wrong! If the problem still appears let the pageâ€™s admin know. Would you like to try again or reject the content?",againButtonLabel:"Try again",rejectButtonLabel:"Reject this content",overwriteTitle:!1,keys:{next:[78,39],previous:[80,37],close:[67,27],panorama:[90,null]},loop:!1},_create:function(){var c,d=a.ui.rlightbox.global,e=this;d.getLightbox(),c=d.extractAnchor(this),c.type!==b&&(d.addToSet(c),this.element.click(function(a){d.open(e),a.preventDefault()}))},_setOption:function(a,b){}}),a.extend(a.ui.rlightbox,{global:{addToSet:function(b){var c=this.getSetName(b.self),d=a.ui.rlightbox.global.sets,e=b.self.options,f=e.setPrefix,g="."+f+"_"+c,h=a(g).index(b.element);d[c]?d[c].splice(h,0,b):(d[c]=[],d[c].push(b))},checkButtonsState:function(){var a=this.data,b=this.$lightbox,c=a.currentSet,d=a.totalElementsNumber,e=a.currentElementNumber,f=a.currentSetElement.self.options.loop;"single"===c||1===d?this.setButtonState("disabled"):1===e&&f===!1?(this.setButtonState("disabled",b.prev),this.setButtonState("default",b.next)):e===d&&f===!1?(this.setButtonState("disabled",b.next),this.setButtonState("default",b.prev)):this.setButtonState("default")},checkMinimalSize:function(a,b){var c=this.data,d=c.minimalLightboxSize,e=d.width,f=d.height;return"width"===a?b<e?e:b:"height"===a?b<f?f:b:void 0},closeLightbox:function(){var b=this.data,c=this.$lightbox;b.ready&&(c.overlay.add(c.root).add(c.header).hide(),a("body").css("overflow","visible"),c.content.empty().width(20).height(20),this.hideArrow(),this.setButtonState("default"),this.panoramaHideIcon(),b.currentElementNumber=null,b.totalElementsNumber=null,c.title.empty(),this.panoramaHideMap(),b.ready=!1)},createStructure:function(){var b=this.data;a(b.htmlLightbox).appendTo("body").after(b.htmlMap).after(b.htmlOverlay)},destroy:function(){var a=this.data,b=a.currentSetElement.element;b.unbind(".rlightbox").unbind("click").removeData("rlightbox")},extractAnchor:function(c){var d={type:b},e=a(c.element),f=e.attr("href"),g={youtube:{urls:[/(https:\/\/www\.youtube\.com\/watch\?v=([\w-_]+))&?/],type:"youtube"},image:{urls:[/.jpg$|.png$|.gif$/],type:"image"},vimeo:{urls:[/(https:\/\/vimeo\.com\/groups\/\w+\/videos\/(\w+))&?/,/(https:\/\/vimeo\.com\/(\w+))&?/],type:"vimeo"},flash:{urls:[/.swf/],type:"flash"}};return a.each(g,function(b,g){var h=!1;if(a.each(g.urls,function(a,b){var i=b.exec(f);if(null!==i)return d={url:i[1],id:i[2],type:g.type,element:e,self:c},("image"===g.type||"flash"===g.type||c.options.overwriteTitle)&&(d.title=e.attr("title"),d.url=f),h=!0,!1}),h)return!1}),d},getAvailableScreenSize:function(){var a=this.data,b=a.lightboxPadding;return{width:this.getWindowSize("width")-b,height:this.getWindowSize("height")-a.headerHeight-b}},getCurrentElementNumber:function(b){var c,d=this.data,e=this.sets,g=e[d.currentSet];return a.each(g,function(d,e){if(a(b).get(0)===e.element.get(0))return c=d+1,!1}),c},getImageStatus:function(a,b){var c,d,e=this.data,f=e.currentSetElement,g=this.getWindowSize("width"),h=this.getWindowSize("height"),i=e.minimalLightboxSize.width,j=e.minimalLightboxSize.height,m=(f.width,f.height,e.lightboxPadding),n=e.headerHeight;return c=a<=i?-1:a>i&&a+m<=g?1:2,d=b<=j?-1:b>j&&h>=b+m+n?1:2,{statusWidth:c,statusHeight:d}},getLightbox:function(){var b=this.data,c=this.$lightbox,d=this;c.root||(this.createStructure(),this.setReferences(),c.close.add(c.overlay).click(a.proxy(this.closeLightbox,this)),c.next.click(a.proxy(this.next,this)),c.prev.click(a.proxy(this.prev,this)),c.next.add(c.prev).add(c.next).add(c.close).hover(function(){a(this).is(":not(.ui-state-disabled)")&&d.setButtonState("highlight",a(this))},function(){a(this).is(":not(.ui-state-disabled)")&&d.setButtonState("default",a(this))}),c.contentContainer.mousemove(a.proxy(this.showArrow,this)).mousemove(a.proxy(this.checkSide,this)).mousemove(a.proxy(this.setCursor,this)).click(function(){"left"===b.side?d.prev.apply(d):"right"===b.side&&d.next.apply(d)}).mousedown(a.proxy(this.panoramaStart,this)).mouseup(a.proxy(this.panoramaStop,this)).mouseleave(function(){d.hideArrow.apply(d),b.side=""}),c.panoramaIcon.click(a.proxy(this.panoramaToggle,this)).hover(a.proxy(this.panoramaHighlight,this)),a(window).bind("resize.rlightbox",a.proxy(this.liveResize,this)),a(document).keyup(a.proxy(this.handleKeyboard,this)))},getOptimalSize:function(a,b){var c=this.data,d=c.minimalLightboxSize,e=d.width,f=d.height,g=this.getAvailableScreenSize(),h=g.width,i=g.height;return"width"===a?b<e?e:b>h?h:b:"height"===a?b<f?f:b>i?i:b:void 0},getParam:function(a,b){var c,d="[\\?&]"+a+"=(\\w+)",e=new RegExp(d);return c=e.exec(b),null!==c?c[1]:null},getSetName:function(b){var c=a(b.element).attr("class"),d=b.options.setPrefix+"_",e=new RegExp(d+"([\\w-_]+)"),f=e.exec(c);return f?f[1]:"single"},checkSide:function(a){var b=this.data,c=this.$lightbox,d=c.contentContainer,e=a.pageX-d.offset().left,f=Math.round(d.width()/2);b.currentElementNumber,b.totalElementsNumber;e<=f?b.side="left":e>f&&(b.side="right"),a.preventDefault()},getSizes:function(){function v(j,k){a=l.getImageStatus(j,k),b=a.statusWidth,c=a.statusHeight,1!==b&&b!==-1||2===c||1!==c&&c!==-1||2===b?2!==b&&2!==c||(1===b||b===-1?(g=o-u-t,e=g,h=g/k,b===-1?(f=p,d=Math.ceil(j*h)):(f=Math.ceil(j*h)-t,d=f,d<=p&&v(d,e))):1===c||c===-1?(f=n-t,d=f,i=f/j,c===-1?(g=q,e=Math.ceil(k*i)):(g=Math.ceil(k*i)-u-t,e=g,e<=q&&v(d,e))):j>k?(f=n-t,d=f,i=f/j,g=Math.ceil(k*i)-t-u,e=g,(e<=q||g+t+u>o)&&v(d,e)):(g=o-u-t,e=g,h=g/k,f=Math.ceil(j*h)-t,d=f,(d<=p||f>n)&&v(d,e))):(1===b?f=j:b===-1&&(f=p),d=j,1===c?g=k:c===-1&&(g=q),e=k)}var a,b,c,d,e,f,g,h,i,k=(this.$lightbox,this.data),l=this,m=k.currentSetElement,n=this.getWindowSize("width"),o=this.getWindowSize("height"),p=k.minimalLightboxSize.width,q=k.minimalLightboxSize.height,r=m.width,s=m.height,t=k.lightboxPadding,u=k.headerHeight;return v(r,s),{imageTargetWidth:d,imageTargetHeight:e,lightboxTargetWidth:f,lightboxTargetHeight:g,statusWidth:b,statusHeight:c}},getWindowSize:function(b){var c=this.data,d=a(window).width(),e=a(window).height(),f=c.minimalLightboxSize,g=c.lightboxPadding,h=c.headerHeight,i=f.width+g,j=f.height+g+h;return"width"===b?d<i?i:d:e<j?j:e},handleKeyboard:function(a){var b=this.data,c=b.currentSetElement,d=c.self.options,e=d.keys,f=a.which;b.ready!==!1&&(f===e.next[0]||f===e.next[1]?this.next():f===e.previous[0]||f===e.previous[1]?this.prev():f===e.close[0]||f===e.close[1]?this.closeLightbox():f!==e.panorama[0]&&f!==e.panorama[1]||"image"!==c.type||this.panoramaToggle(a))},hideArrow:function(){var a=this.$lightbox,b=a.arrow;b.hide()},liveResize:function(){var a=this.data,d=(this.$lightbox,a.currentSetElement.type);a.ready&&a.panoramaOn===!1&&"image"===d?(this.queueResizeLightbox(),this.updateTitleWidth(),this.queueCenterContent(),this.panoramaCheckAvailability()):a.ready&&a.panoramaOn&&"image"===d?(this.queueCenterLightbox(),this.panoramaShrink(),this.panoramaCheckAvailability()):a.ready&&"image"!==d&&this.queueCenterLightbox()},loadContentFlash:function(b){function n(){c=h.getParam("width",b),d=h.getParam("height",b),(null===c||isNaN(c))&&(c=m.videoWidth),(null===d||isNaN(d))&&(d=m.videoHeight),l.width=c,l.height=d,k=h.replaceHtmlPatterns(k,{width:c,height:d,url:b}),e=a("<div></div>"),e.css({display:"none",width:c,height:d}),i.removeClass("ui-lightbox-loader").empty().append(k).children().wrap(e),j.resolve()}var c,d,e,f=this.data,g=this.$lightbox,h=this,i=g.content,j=a.Deferred(),k=f.htmlFlash,l=f.currentSetElement,m=l.self.options;return i.addClass("ui-lightbox-loader"),setTimeout(n,1e3),j.promise()},loadContentImage:function(c){var d=this.$lightbox,e=this.data,f=this,g=e.currentSetElement,h=a.Deferred(),i=a("<img />");return d.content.addClass("ui-lightbox-loader"),i.attr("src",c).bind("load",function(){a(this).unbind("load"),g.width=this.width,g.height=this.height,d.content.removeClass("ui-lightbox-loader").empty().append(this).children().hide(),h.resolve()}).error(function(){d.content.removeClass("ui-lightbox-loader"),f.showErrorMessage(),h.resolve()}).each(function(){if(this.complete||this.complete===b){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=a}}),h.promise()},loadContentVimeo:function(b){var e=this.data,f=this.$lightbox,g=this,h=a.Deferred(),i=e.providers.vimeo,j=e.currentSetElement,k=j.self.options;e.minimalLightboxSize;return f.content.addClass("ui-lightbox-loader"),a.ajax({url:i,data:{url:b,maxwidth:k.videoWidth,maxheight:k.videoHeight},dataType:"jsonp",timeout:5e3}).success(function(a){f.content.removeClass("ui-lightbox-loader").empty().append(a.html).children().wrap("<div style='display: none'></div>").end().find("div:first").width(a.width).height(a.height),k.overwriteTitle===!1&&(j.title=a.title),j.width=a.width,j.height=a.height,h.resolve()}).error(function(){f.content.removeClass("ui-lightbox-loader"),g.showErrorMessage(),h.resolve()}),h.promise()},loadContentYoutube:function(b){function p(){e.content.removeClass("ui-lightbox-loader"),g.showErrorMessage(),h.resolve()}var c,d=this.data,e=this.$lightbox,f=e.content,g=this,h=a.Deferred(),i=d.providers.youtube,j=d.currentSetElement,k=j.self.options,m=(d.minimalLightboxSize,k.videoWidth),n=k.videoHeight,o=d.htmlYoutube;return e.content.addClass("ui-lightbox-loader"),a.ajax({url:i+j.id+"?callback=?",data:{v:2,alt:"jsonc",prettyprint:!0},dataType:"jsonp",timeout:5e3}).success(function(b){return b.error?void p():(o=g.replaceHtmlPatterns(o,{width:m,height:n,url:j.id}),c=a("<div></div>"),c.css({display:"none",width:m,height:n}),f.removeClass("ui-lightbox-loader").empty().append(o).children().wrap(c),k.overwriteTitle===!1&&(j.title=b.data.title),j.width=m,j.height=n,void h.resolve())}).error(function(){p()}),h.promise()},navigationGoToElement:function(a){var b=this.data,c=this.sets,d=this.$lightbox,e=b.currentSet;b.currentElementNumber=a,b.currentSetElement=c[e][a-1],this.setNextQueue(),d.queueContainer.next.dequeue("lightboxNext")},next:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.ready,e=a.panoramaOn,f=a.currentSet,g=a.currentElementNumber,h=a.totalElementsNumber,i=a.currentSetElement.self.options,j=i.loop,k=!0;d&&"single"!==f&&e===!1&&(g+1<=h?a.currentElementNumber=g+=1:g+1>h&&j?a.currentElementNumber=g=1:k=!1,k&&(a.currentSetElement=b[f][g-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},open:function(b){var c=this.data,d=this.sets,e=this.$lightbox,f=b.element,g=this.getSetName(b);a(f).attr("href");c.currentSet=g,c.totalElementsNumber=d[g].length,c.currentElementNumber=this.getCurrentElementNumber(f),c.currentSetElement=d[g][c.currentElementNumber-1],this.setOpenQueue(),this.setNextQueue(),this.checkButtonsState(),e.queueContainer.open.dequeue("lightboxOpen")},panoramaCenterContent:function(){var a,b,c=this.data,d=this.$lightbox,e=c.currentSetElement,f=this.getAvailableScreenSize(),g=f.width,h=f.height,i=e.width,j=e.height,k=d.content,l=k.find("img");a=g<i?0:k.width()/2-l.width()/2,b=h<j?0:k.height()/2-l.height()/2,l.css({top:b,left:a})},panoramaCheckAvailability:function(){var a=this.data,b=a.currentSetElement,c=b.width,d=b.height,e=b.currentWidth,f=b.currentHeight;e<c||f<d?(this.panoramaShowIcon("expand"),a.enablePanorama=!0):(a.enablePanorama=!1,this.panoramaHideIcon())},panoramaExpand:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement,e=d.self.options;b.panoramaOn=!0,"click"===a.type?this.panoramaShowIcon("shrink","-hover"):this.panoramaShowIcon("shrink"),c.content.css("overflow","hidden"),c.content.find("img").width(d.width).height(d.height),this.panoramaSetContentSize(),this.panoramaCenterContent(),this.queueCenterLightbox(),this.updateTitleWidth(),e.showMap&&this.panoramaShowMap(),this.hideArrow(),this.setCursor()},panoramaHideIcon:function(){var a=this.data,b=this.$lightbox;b.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink"),a.panoramaOn=!1},panoramaHideMap:function(){var a=this.$lightbox;a.map.hide(),a.viewport.css({left:-1,top:-1})},panoramaHighlight:function(){var a,b=this.$lightbox,c="-hover";b.panoramaIcon.attr("class",function(b,d){return a=d.indexOf(c),a!==-1?d.slice(0,a):d+c})},panoramaSetContentSize:function(){var a,b,c=this.data,d=this.$lightbox,e=c.currentSetElement,f=c.minimalLightboxSize,g=f.width,h=f.height,i=this.getAvailableScreenSize(),j=i.width,k=i.height,l=e.width,m=e.height;a=l>j?j:l<=g?g:l,b=m>k?k:m<=h?h:m,d.content.width(a).height(b)},panoramaShowIcon:function(a,b){var c=this.$lightbox,d=b||"",e="ui-lightbox-panorama-icon-"+a+d;c.panoramaIcon.show().removeClass().addClass(e)},panoramaShowMap:function(){var a,b,c,d,e,f,g=this.data,h=g.minimalLightboxSize,i=this.$lightbox,j=i.content,k=j.find("img"),l=k.width(),m=k.height(),n=g.currentSetElement,o=g.mapSize;c=o.width/n.width,d=o.height/n.height,e=l<h.width?l:j.width(),f=m<h.height?m:j.height(),a=Math.ceil(e*c),b=Math.ceil(f*d),i.viewport.width(a).height(b),i.map.show(),g.viewportRatio={width:c,height:d}},panoramaShrink:function(a){var b=this.data,c=this.$lightbox;b.panoramaOn=!1,a&&"click"===a.type?this.panoramaShowIcon("expand","-hover"):this.panoramaShowIcon("expand"),this.queueResizeLightbox(),this.queueCenterContent(),c.content.css("overflow","visible"),this.updateTitleWidth(),this.panoramaHideMap(),this.setCursor()},panoramaStart:function(a){var b=this.data;this.$lightbox;b.panoramaPosition={xStart:a.pageX,yStart:a.pageY},a.preventDefault()},panoramaStop:function(a){var b=this.data,c=this.$lightbox,d=(a.pageX-b.panoramaPosition.xStart)*-1,e=(a.pageY-b.panoramaPosition.yStart)*-1,f=c.content,g=b.viewportRatio;b.panoramaOn&&(f.scrollLeft(f.scrollLeft()+d).scrollTop(f.scrollTop()+e),c.viewport.css({left:f.scrollLeft()*g.width-1,top:f.scrollTop()*g.height-1})),a.stopPropagation()},panoramaToggle:function(a){var b=this.data,c=b.panoramaOn,d=b.enablePanorama;d&&c===!1?this.panoramaExpand(a):d&&c&&this.panoramaShrink(a)},prev:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.ready,e=a.panoramaOn,f=a.currentSet,g=a.currentElementNumber,h=a.totalElementsNumber,i=a.currentSetElement.self.options,j=i.loop,k=!0;d&&"single"!==f&&e===!1&&(g-1>=1?a.currentElementNumber=g-=1:g-1<1&&j?a.currentElementNumber=g=h:k=!1,k&&(a.currentSetElement=b[f][g-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},removeSetElement:function(a){var b=this.data,c=this.sets,d=b.currentSet,e=b.totalElementsNumber;c[d].splice(a-1,1),1===e||"single"===d?(this.closeLightbox(),this.destroy()):(this.destroy(),b.totalElementsNumber=c[d].length,a===e?this.navigationGoToElement(a-1):this.navigationGoToElement(a))},replaceHtmlPatterns:function(b,c){return a.each(c,function(a,c){var d=new RegExp("{"+a+"}","g");b=b.replace(d,c)}),b},setButtonState:function(a,b){var c=this.$lightbox,d=b||c.controlButtons;switch(a){case"default":d.removeClass("ui-state-highlight ui-state-disabled");break;case"highlight":d.addClass("ui-state-highlight");break;case"disabled":d.addClass("ui-state-disabled")}},setCursor:function(a){var b=this.data,c=this.$lightbox,d=c.contentContainer,e=b.currentSet,f=b.currentSetElement,g=b.currentSetElement.type,h=b.totalElementsNumber,i=b.currentElementNumber,j=b.side,k=b.panoramaOn,l=b.showErrorMessage,m=f.self.options,n=m.loop;b.ready?("single"===e||1===h||1===i&&"left"===j||i===h&&"right"===j)&&k===!1&&("image"===g||"image"!==g&&l)?n===!1?d.css("cursor","default"):d.css("cursor","pointer"):k?d.css("cursor","move"):"image"===g||"image"!==g&&l?d.css("cursor","pointer"):d.css("cursor","auto"):d.css("cursor","default"),a&&a.preventDefault()},setNextQueue:function(){var b=this.$lightbox,c=[a.proxy(this.queueSlideUpHeader,this),a.proxy(this.queueHideContent,this),a.proxy(this.queueLoadContent,this),a.proxy(this.queueResizeLightbox,this),a.proxy(this.queueCenterContent,this),a.proxy(this.queueShowContent,this),a.proxy(this.queueSlideDownHeader,this)];b.queueContainer.next.queue("lightboxNext",c)},setOpenQueue:function(){var b=this.$lightbox,c=[a.proxy(this.queueShowOverlay,this),a.proxy(this.queueCenterLightbox,this),a.proxy(this.queueLoadContent,this),a.proxy(this.queueResizeLightbox,this),a.proxy(this.queueCenterContent,this),a.proxy(this.queueShowContent,this),a.proxy(this.queueSlideDownHeader,this)];b.queueContainer.open.queue("lightboxOpen",c)},setReferences:function(){var b=this.$lightbox;b.root=a("#ui-lightbox"),b.panoramaIcon=b.root.find("#ui-lightbox-panorama-icon"),b.contentContainer=b.root.find("#ui-lightbox-content-container"),b.content=b.contentContainer.find("#ui-lightbox-content"),b.arrow=b.contentContainer.find("#ui-lightbox-arrow"),b.header=b.root.find("#ui-lightbox-bottombar"),b.headerWrapper=b.header.find("#ui-lightbox-title-wrapper"),b.overlay=a("#ui-lightbox-overlay"),b.next=b.root.find("#ui-lightbox-button-next"),b.prev=b.root.find("#ui-lightbox-button-prev"),b.controlButtons=b.next.add(b.prev),b.close=b.root.find("#ui-lightbox-button-close"),b.counter=b.root.find("#ui-lightbox-counter"),b.title=b.root.find("#ui-lightbox-title"),b.map=a("#ui-lightbox-map"),b.viewport=b.map.children().eq(0),b.queueContainer={open:a({}),next:a({})}},showArrow:function(a){var b=this.data,c=this.$lightbox,d=c.arrow,e=b.showErrorMessage,f=b.side,g=b.currentElementNumber,h=b.totalElementsNumber,i=b.currentSetElement.self.options.loop;b.ready&&"single"!==b.currentSet&&("image"===b.currentSetElement.type||e)&&b.panoramaOn===!1&&("left"===f&&(g>1||i)?d.show().removeClass("ui-lightbox-arrow-next ui-corner-left").addClass("ui-lightbox-arrow-prev ui-corner-right").find("span").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-w"):"right"===f&&(g<h||i)?d.show().removeClass("ui-lightbox-arrow-prev ui-corner-right").addClass("ui-lightbox-arrow-next ui-corner-left").find("span").removeClass("ui-icon-carat-1-w").addClass("ui-icon-carat-1-e"):this.hideArrow()),a&&a.preventDefault()},showErrorMessage:function(){var b,c,d,e=this.data,f=this.$lightbox,g=this,h=e.currentSetElement,i=h.self.options,j=e.currentElementNumber,k=i.errorMessage,l=i.againButtonLabel,m=i.rejectButtonLabel,n=e.htmlErrorScreen,o=e.errorScreenSize,p=o.width,q=o.height;n=g.replaceHtmlPatterns(n,{message:k,labelAgain:l,labelReject:m}),d=a(n),b=d.find("#ui-lightbox-error-footer-again"),c=d.find("#ui-lightbox-error-footer-reject"),b.click(function(){g.navigationGoToElement(j)}).hover(function(){a(this).toggleClass("ui-state-hover")}),c.click(function(){g.removeSetElement(j)}).hover(function(){a(this).toggleClass("ui-state-hover")}),f.content.empty().append(d).find("#ui-lightbox-error").width(p).height(q).end().children().hide(),e.showErrorMessage=!0},updateCounter:function(){var a,b,c,d=this.data,e=this.$lightbox,f=d.currentSetElement,g=f.self.options,h=d.currentSet;"single"!==h?(a=d.currentElementNumber,b=d.totalElementsNumber):(a=1,b=1),c=a+g.counterDelimiter+b,e.counter.text(c)},updateTitle:function(){var a=this.data,b=this.$lightbox,c=a.currentSetElement;""!==c.title?b.title.empty().append(c.title):b.title.append("&nbsp;")},updateTitleWidth:function(){var a=this.$lightbox;a.header.width(a.content.width()-12)},queueHideContent:function(b){var c=this.data,d=this.$lightbox,e=c.currentSetElement,f=e.self.options;d.content.children().fadeOut(f.animationSpeed,function(){a(this).remove(),b()}),d.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink"),c.panoramaOn=!1,this.panoramaHideMap()},queueShowOverlay:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self;b.ready=!1,this.setCursor(),c.overlay.fadeIn(d.options.animationSpeed,a)},queueCenterLightbox:function(a){var b=this.$lightbox,c=b.root,d=this.getWindowSize("width"),e=this.getWindowSize("height"),f=c.outerWidth(),g=c.outerHeight();c.css({left:Math.round((d-f)/2)+"px",top:Math.round((e-g)/2)+"px"}).show(0,a)},queueLoadContent:function(b){var c,d=this.data,e=d.currentSetElement;switch(d.showErrorMessage=!1,e.type){case"image":c="loadContentImage";break;case"youtube":c="loadContentYoutube";break;case"vimeo":c="loadContentVimeo";break;case"flash":c="loadContentFlash"}a.when(this[c](e.url)).then(function(){b()})},queueResizeLightbox:function(b){var c,e,f,g,h,i,j,k=this.data,l=this.$lightbox,m=k.lightboxPadding,n=k.headerHeight,o=k.currentSetElement,p=o.self.options,q=k.showErrorMessage,r=k.errorScreenSize,s=r.width,t=r.height,u=k.minimalLightboxSize;u.width,u.height;c=p.animationSpeed,"image"===o.type&&q===!1?(e=this.getSizes(),f=e.imageTargetWidth,g=e.imageTargetHeight,h=e.lightboxTargetWidth,i=e.lightboxTargetHeight,j=l.content.find("img"),o.currentWidth=f,o.currentHeight=g,j.width(f).height(g),c=a.isFunction(b)?p.animationSpeed:0):"youtube"!==o.type&&"vimeo"!==o.type||q!==!1?"flash"===o.type&&q===!1?(h=this.getOptimalSize("width",o.width),i=this.getOptimalSize("height",o.height)):q&&(c=0,h=s,i=t):(h=this.checkMinimalSize("width",o.width),i=this.checkMinimalSize("height",o.height)),l.root.find("#ui-lightbox-content").animate({width:h},c).animate({height:i},c).end().animate({left:(this.getWindowSize("width")-h-m)/2},c).animate({top:(this.getWindowSize("height")-i-m-n)/2},c,b)},queueCenterContent:function(a){var c=this.$lightbox,d=c.content,e=d.children();d.children().css({top:d.height()/2-e.outerHeight()/2,left:d.width()/2-e.outerWidth()/2}),a&&a()},queueShowContent:function(a){var b=this.data,c=this.$lightbox,d=this,e=b.currentSetElement,f=e.self.options,g=b.showErrorMessage;c.content.children().fadeIn(f.animationSpeed,function(){"image"===e.type&&g===!1&&d.panoramaCheckAvailability(),a()})},queueSlideDownHeader:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self.options;c.header.slideDown(d.animationSpeed,a),this.updateCounter(),this.updateTitleWidth(),this.updateTitle(),this.checkButtonsState(),b.ready=!0,this.setCursor(),this.showArrow()},queueSlideUpHeader:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement,e=d.self.options;b.ready=!1,this.hideArrow(),this.setCursor(),c.header.slideUp(e.animationSpeed,a)},$lightbox:{},sets:{},data:{minimalLightboxSize:{width:300,height:300},lightboxPadding:12,headerHeight:57,ready:!1,panoramaOn:!1,mapSize:{width:150,height:100},providers:{vimeo:"https://www.vimeo.com/api/oembed.json?callback=?",youtube:"https://gdata.youtube.com/feeds/api/videos/"},showErrorMessage:!1,currentSetElement:{},enablePanorama:!1,errorScreenSize:{width:500,height:500},htmlFlash:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='{width}' height='{height}'><param name='movie' value='{url}' /><!--[if !IE]>--><object type='application/x-shockwave-flash' data='{url}' width='{width}' height='{height}'><!--<![endif]--><!--[if !IE]>--></object><!--<![endif]--></object>",htmlErrorScreen:"<div id='ui-lightbox-error'><div id='ui-lightbox-error-message' class='ui-lightbox-error-icon-sign'>{message}</div><div id='ui-lightbox-error-footer'><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-again' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-refresh'></span><span class='ui-button-text'>{labelAgain}</span></button><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-reject' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-trash'></span><span class='ui-button-text'>{labelReject}</span></button></div></div>",htmlYoutube:"<iframe class='youtube-player' type='text/html' width='{width}' height='{height}' src='https://www.youtube.com/embed/{url}' frameborder='0'></iframe>",htmlLightbox:"<div id='ui-lightbox' class='ui-widget ui-widget-content ui-corner-all' style='display: none'><div id='ui-lightbox-content-container'><div id='ui-lightbox-content' class='ui-widget-content'></div><a id='ui-lightbox-arrow' class='ui-widget-header' style='display: none'><span class='ui-icon'>go</span></a></div><div id='ui-lightbox-bottombar' class='ui-widget-header ui-corner-all' style='display: none'><p id='ui-lightbox-title-wrapper'><span id='ui-lightbox-title'></span></p><p id='ui-lightbox-bottombar-bottom'><a id='ui-lightbox-button-prev' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-w'>prev</span></a><span id='ui-lightbox-counter'></span><a id='ui-lightbox-button-next' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-e'>next</span></a></p><a id='ui-lightbox-button-close' class='ui-lightbox-button'><span class='ui-icon ui-icon-closethick'>close</span></a><div id='ui-lightbox-panorama-icon' style='display: none'></div></div></div>",htmlMap:"<div id='ui-lightbox-map' style='display: none'><div id='ui-lightbox-map-viewport'></div></div>",htmlOverlay:"<div id='ui-lightbox-overlay' class='ui-widget-overlay' style='display: none'></div>"}}})}(jQuery);